<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  
  <meta http-equiv="Content-Security-Policy" 
        content="default-src 'self'; 
                 script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com https://cdnjs.cloudflare.com; 
                 style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; 
                 font-src https://fonts.gstatic.com; 
                 img-src 'self' https: data: https://*.googleusercontent.com https://*.discordapp.com; 
                 connect-src 'self' https://discord.com;">
  
  <meta name="referrer" content="no-referrer-when-downgrade">
  <meta property="og:title" content="SESE SERVER | å…¬å¼ã‚µã‚¤ãƒˆ" />
  <meta property="og:description" content="ã‚ªãƒ¼ãƒŠãƒ¼ sese_PAP_1122 & MRF_4922 ãŒçµ±æ‹¬ã™ã‚‹ã€è¦ç´„ã«å®ˆã‚‰ã‚ŒãŸã‚¯ãƒªãƒ¼ãƒ³ãªDiscordã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚" />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#4f46e5">

  <title>SESE SERVER | å…¬å¼ã‚µã‚¤ãƒˆ</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'media',
      theme: { 
        extend: { 
          fontFamily: { sans: ['Noto Sans JP', 'sans-serif'] },
          colors: {
            brand: {
              light: '#6366f1',
              dark: '#4f46e5',
            }
          }
        } 
      }
    }
  </script>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js"></script>

  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet">
  
  <style>
    :root { color-scheme: light dark; }
    body { font-family: 'Noto Sans JP', sans-serif; transition: background-color 0.3s, color 0.3s; }
    
    /* ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
    .fade-in { animation: fadeIn 0.4s ease-out forwards; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    
    .scroll-mt-24 { scroll-margin-top: 6rem; }
    
    /* ãƒ¢ãƒ¼ãƒ€ãƒ«(dialog)ã®èƒŒæ™¯ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º */
    dialog::backdrop {
      background: rgba(15, 23, 42, 0.7);
      backdrop-filter: blur(8px);
    }
    
    /* ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    .dark ::-webkit-scrollbar-thumb { background: #334155; }
  </style>
</head>
<body class="min-h-screen bg-gray-50 text-gray-800 dark:bg-[#0f172a] dark:text-slate-200 antialiased">

  <header class="bg-white/80 dark:bg-[#0f172a]/80 backdrop-blur-xl shadow-sm sticky top-0 z-50 border-b border-gray-200 dark:border-slate-800">
    <div class="max-w-7xl mx-auto px-4 flex items-center justify-between py-4">
      <div class="flex items-center gap-3 cursor-pointer js-router-link group" data-route="home">
        <div class="w-10 h-10 rounded-xl bg-indigo-600 flex items-center justify-center text-white font-black text-xl shadow-lg group-hover:scale-110 transition-transform">S</div>
        <span class="font-black text-xl tracking-tighter dark:text-white">SESE SERVER</span>
      </div>

      <nav class="hidden md:flex items-center gap-1 font-bold text-sm text-gray-600 dark:text-slate-400">
        <button data-route="home" class="nav-btn js-router-link px-4 py-2 rounded-xl transition hover:bg-gray-100 dark:hover:bg-slate-800">ãƒ›ãƒ¼ãƒ </button>
        <button data-route="guidelines" class="nav-btn js-router-link px-4 py-2 rounded-xl transition hover:bg-gray-100 dark:hover:bg-slate-800">è¦ç´„</button>
        <button data-route="staff" class="nav-btn js-router-link px-4 py-2 rounded-xl transition hover:bg-gray-100 dark:hover:bg-slate-800">é‹å–¶</button>
        <button data-route="serverinfo" class="nav-btn js-router-link px-4 py-2 rounded-xl transition hover:bg-gray-100 dark:hover:bg-slate-800">å‹•å‘</button>
        <button data-route="contact" class="nav-btn js-router-link px-4 py-2 rounded-xl transition hover:bg-gray-100 dark:hover:bg-slate-800">é€£çµ¡</button>
        
        <button id="nav-admin" data-route="admin" class="nav-btn js-router-link hidden px-4 py-2 rounded-xl bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 font-black hover:bg-red-100 transition">âš ï¸ ç®¡ç†</button>
      </nav>

      <div id="user-area" class="flex items-center gap-3">
        <div class="animate-pulse bg-gray-200 dark:bg-slate-700 h-9 w-24 rounded-full"></div>
      </div>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-4 py-12 pb-24">

    <section id="page-home" class="page fade-in">
      <div class="rounded-[3rem] bg-gradient-to-br from-indigo-600 via-indigo-700 to-violet-800 p-10 md:p-20 text-center shadow-2xl shadow-indigo-500/20 text-white mb-16 relative overflow-hidden">
        <div class="relative z-10">
          <h1 class="text-5xl md:text-7xl font-black mb-8 tracking-tighter leading-tight">æœ€é«˜å“è³ªã®äº¤æµã‚’ã€‚</h1>
          <p class="text-indigo-100 text-lg md:text-xl mb-12 font-medium max-w-2xl mx-auto leading-relaxed opacity-90">
            ã‚ªãƒ¼ãƒŠãƒ¼ sese_PAP_1122 & MRF_4922 ãŒçµ±æ‹¬ã™ã‚‹ã€<br class="hidden md:block">è¦ç´„ã«å®ˆã‚‰ã‚ŒãŸã‚¯ãƒªãƒ¼ãƒ³ãªDiscordã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚
          </p>
          <div class="flex flex-wrap gap-5 justify-center">
            <a href="https://discord.gg/WEWgXFss9p" target="_blank" class="bg-white text-indigo-700 px-10 py-4 rounded-2xl font-black text-lg shadow-xl hover:scale-105 active:scale-95 transition-all">ã‚µãƒ¼ãƒãƒ¼ã¸å‚åŠ </a>
            <button data-route="guidelines" class="js-router-link bg-indigo-900/30 backdrop-blur-md text-white border border-white/20 px-10 py-4 rounded-2xl font-black text-lg hover:bg-indigo-900/50 transition-all">è¦ç´„ã‚’èª­ã‚€</button>
          </div>
        </div>
        <div class="absolute top-0 right-0 -mr-20 -mt-20 w-80 h-80 bg-white/10 rounded-full blur-3xl"></div>
        <div class="absolute bottom-0 left-0 -ml-20 -mb-20 w-80 h-80 bg-indigo-400/20 rounded-full blur-3xl"></div>
      </div>

      <div class="grid md:grid-cols-3 gap-8">
        <div class="bg-white dark:bg-slate-800 p-10 rounded-[2.5rem] shadow-sm border border-gray-100 dark:border-slate-700 hover:shadow-xl transition-shadow group">
          <div class="w-14 h-14 bg-blue-50 dark:bg-blue-900/30 rounded-2xl flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform">ğŸ›¡ï¸</div>
          <h3 class="font-black text-2xl mb-4 dark:text-white tracking-tight">å®‰å…¨ãªå ´æ‰€</h3>
          <p class="text-gray-500 dark:text-slate-400 text-sm leading-loose font-medium">æ˜ç¢ºãªãƒ«ãƒ¼ãƒ«ã¨å¾¹åº•ã—ãŸãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚Šã€å…¨ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¸å¿«ãªæ€ã„ã‚’ã›ãšéã”ã›ã‚‹ç’°å¢ƒã‚’ç¶­æŒã—ã¦ã„ã¾ã™ã€‚</p>
        </div>
        <div class="bg-white dark:bg-slate-800 p-10 rounded-[2.5rem] shadow-sm border border-gray-100 dark:border-slate-700 hover:shadow-xl transition-shadow group">
          <div class="w-14 h-14 bg-indigo-50 dark:bg-indigo-900/30 rounded-2xl flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform">âš–ï¸</div>
          <h3 class="font-black text-2xl mb-4 dark:text-white tracking-tight">å…¬å¹³ãªé‹å–¶</h3>
          <p class="text-gray-500 dark:text-slate-400 text-sm leading-loose font-medium">ç‹¬è£ã‚’è¨±ã•ãªã„ç›¸äº’ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã‚’å°å…¥ã€‚é‹å–¶é™£ã‚‚è¦ç´„ã‚’éµå®ˆã—ã€å¸¸ã«é€æ˜æ€§ã®é«˜ã„åˆ¤æ–­ã‚’å¿ƒãŒã‘ã¦ã„ã¾ã™ã€‚</p>
        </div>
        <div class="bg-white dark:bg-slate-800 p-10 rounded-[2.5rem] shadow-sm border border-gray-100 dark:border-slate-700 hover:shadow-xl transition-shadow group">
          <div class="w-14 h-14 bg-purple-50 dark:bg-purple-900/30 rounded-2xl flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform">ğŸ¤</div>
          <h3 class="font-black text-2xl mb-4 dark:text-white tracking-tight">æ´»ç™ºãªã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£</h3>
          <p class="text-gray-500 dark:text-slate-400 text-sm leading-loose font-medium">å¤šç¨®å¤šæ§˜ãªè¶£å‘³ã‚’æŒã¤100åä»¥ä¸Šã®ãƒ¡ãƒ³ãƒãƒ¼ãŒåœ¨ç±ã€‚æ—¥ã€…ã®é›‘è«‡ã‹ã‚‰å°‚é–€çš„ãªè­°è«–ã¾ã§ã€å¹…åºƒãæ¥½ã—ã‚ã¾ã™ã€‚</p>
        </div>
      </div>
    </section>

    <section id="page-guidelines" class="page hidden fade-in">
      <div class="bg-white dark:bg-slate-800 rounded-[3rem] shadow-2xl border border-gray-200 dark:border-slate-700 overflow-hidden">
        <div class="bg-slate-900 p-12 text-white text-center relative">
          <h2 class="text-4xl font-black mb-4 tracking-tight">ã‚µãƒ¼ãƒãƒ¼è¦ç´„</h2>
          <p class="text-slate-400 text-xs font-black uppercase tracking-[0.3em] opacity-80">Server Constitution & Guidelines</p>
          <div class="absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"></div>
        </div>

        <div class="p-8 md:p-16 space-y-16">
          <div class="scroll-mt-24">
            <h3 class="flex items-center gap-3 text-2xl font-black text-indigo-600 dark:text-indigo-400 mb-8">
              <span class="w-8 h-8 rounded-lg bg-indigo-600 text-white flex items-center justify-center text-sm">01</span>
              åŸºæœ¬åŸå‰‡
            </h3>
            <div class="bg-gray-50 dark:bg-slate-900/50 p-8 rounded-[2rem] border border-gray-100 dark:border-slate-700">
              <p class="text-lg leading-relaxed font-bold dark:text-slate-200">
                æœ¬è¦ç´„ã¯ã€å½“ã‚µãƒ¼ãƒãƒ¼ã«ãŠã‘ã‚‹ç§©åºã®ç¶­æŒã¨ã€å‚åŠ è€…å…¨å“¡ã®æ¨©åˆ©ã‚’å®ˆã‚‹ãŸã‚ã®åŸºæœ¬æ³•ã§ã™ã€‚å‚åŠ è€…ã¯å…¥å®¤ã‚’ä»¥ã¦ã“ã‚Œã«åŒæ„ã—ãŸã‚‚ã®ã¨ã¿ãªã—ã¾ã™ã€‚
              </p>
            </div>
          </div>

          <div class="scroll-mt-24">
            <h3 class="flex items-center gap-3 text-2xl font-black text-red-600 dark:text-red-400 mb-8">
              <span class="w-8 h-8 rounded-lg bg-red-600 text-white flex items-center justify-center text-sm">02</span>
              ç¦æ­¢äº‹é …
            </h3>
            <div class="grid md:grid-cols-2 gap-4 font-bold">
              <div class="p-6 bg-red-50/50 dark:bg-red-900/10 rounded-2xl border border-red-100/50 dark:border-red-900/20 text-gray-700 dark:text-slate-300">
                <span class="text-red-600 block mb-2">è¡Œç‚ºç¦æ­¢</span>
                ã‚¹ãƒ‘ãƒ ã€éåº¦ãªãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã€è‘—ä½œæ¨©ä¾µå®³ã€ãªã‚Šã™ã¾ã—ã€å¤šé‡ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ©ç”¨ã€‚
              </div>
              <div class="p-6 bg-red-50/50 dark:bg-red-900/10 rounded-2xl border border-red-100/50 dark:border-red-900/20 text-gray-700 dark:text-slate-300">
                <span class="text-red-600 block mb-2">å¯¾äººç¦æ­¢</span>
                æš´è¨€ã€äººæ ¼å¦å®šã€å·®åˆ¥çš„ç™ºè¨€ã€å‡ºä¼šã„ç›®çš„ã®éåº¦ãªä»˜ãã¾ã¨ã„ã€‚
              </div>
            </div>
          </div>
          
          <div class="scroll-mt-24">
            <h3 class="flex items-center gap-3 text-2xl font-black text-indigo-600 dark:text-indigo-400 mb-8">
              <span class="w-8 h-8 rounded-lg bg-indigo-600 text-white flex items-center justify-center text-sm">03</span>
              é‹å–¶ä½“åˆ¶
            </h3>
            <div class="p-8 bg-slate-900 rounded-[2rem] text-white space-y-6">
                <p class="font-bold opacity-90 leading-relaxed">
                    å½“ã‚µãƒ¼ãƒãƒ¼ã¯ã€Œç‹¬è£é˜²æ­¢æ¡é …ã€ã‚’å°å…¥ã—ã¦ã„ã¾ã™ã€‚é‹å–¶ãƒãƒ¼ãƒ å†…ã®éåŠæ•°ã®åˆæ„ãŒã‚ã‚Œã°ã€ã‚ªãƒ¼ãƒŠãƒ¼ã®æ¨©é™åˆ¶é™ã‚„äº¤ä»£ã‚’è­°è«–ã™ã‚‹ã“ã¨ãŒå¯èƒ½ãªæ°‘ä¸»çš„ãªä½“åˆ¶ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚
                </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="page-staff" class="page hidden fade-in space-y-12">
      <div class="text-center max-w-2xl mx-auto">
        <h2 class="text-4xl font-black mb-4 dark:text-white tracking-tighter">é‹å–¶ãƒãƒ¼ãƒ </h2>
        <p class="text-gray-500 font-bold text-sm">SESE SERVERã‚’æ”¯ãˆã‚‹ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ³ãƒãƒ¼ã§ã™ã€‚</p>
      </div>
      
      <div class="grid md:grid-cols-2 gap-8">
        <div class="bg-white dark:bg-slate-800 p-10 rounded-[3rem] shadow-sm border border-gray-100 dark:border-slate-700 relative overflow-hidden">
          <div class="absolute top-0 right-0 p-6 opacity-10 text-6xl">ğŸ‘‘</div>
          <h3 class="font-black text-indigo-600 text-xl mb-8 flex items-center gap-2">æ‰€æœ‰è€… / ã‚ªãƒ¼ãƒŠãƒ¼</h3>
          <div class="space-y-4">
            <div class="flex items-center justify-between p-5 bg-indigo-50 dark:bg-indigo-900/20 rounded-2xl border border-indigo-100 dark:border-indigo-900/30">
                <span class="font-black text-lg">sese_PAP_1122</span>
                <span class="text-[10px] bg-indigo-600 text-white px-3 py-1 rounded-full font-bold">FOUNDER</span>
            </div>
            <div class="flex items-center justify-between p-5 bg-indigo-50 dark:bg-indigo-900/20 rounded-2xl border border-indigo-100 dark:border-indigo-900/30">
                <span class="font-black text-lg">MRF_4922</span>
                <span class="text-[10px] bg-indigo-600 text-white px-3 py-1 rounded-full font-bold">FOUNDER</span>
            </div>
          </div>
        </div>

        <div class="bg-white dark:bg-slate-800 p-10 rounded-[3rem] shadow-sm border border-gray-100 dark:border-slate-700 relative overflow-hidden">
          <div class="absolute top-0 right-0 p-6 opacity-10 text-6xl">ğŸ›¡ï¸</div>
          <h3 class="font-black text-slate-500 dark:text-slate-400 text-xl mb-8">ç®¡ç†è€… / ã‚¢ãƒ‰ãƒŸãƒ³</h3>
          <div class="grid grid-cols-1 gap-3 font-bold">
            <div class="p-4 bg-gray-50 dark:bg-slate-900/50 rounded-2xl border border-gray-100 dark:border-slate-700 flex justify-between items-center">
                <span>7498</span>
                <span class="text-[9px] text-gray-400">ADMINISTRATOR</span>
            </div>
            <div class="p-4 bg-gray-50 dark:bg-slate-900/50 rounded-2xl border border-gray-100 dark:border-slate-700 flex justify-between items-center">
                <span>creeper_dev</span>
                <span class="text-[9px] text-gray-400">ADMINISTRATOR</span>
            </div>
            <div class="p-4 bg-gray-50 dark:bg-slate-900/50 rounded-2xl border border-gray-100 dark:border-slate-700">supernova</div>
          </div>
        </div>
      </div>
    </section>

    <section id="page-serverinfo" class="page hidden fade-in space-y-8">
        <h2 class="text-3xl font-black tracking-tighter dark:text-white">ç¾åœ¨ã®å‹•å‘</h2>
        <div class="grid md:grid-cols-2 gap-8">
            <div class="bg-indigo-600 p-10 rounded-[3rem] text-white shadow-2xl shadow-indigo-500/30 relative overflow-hidden group">
                <div class="relative z-10">
                    <h3 class="text-sm font-black opacity-70 mb-2 uppercase tracking-widest">Active Members</h3>
                    <div class="flex items-end gap-3">
                        <span id="online-count" class="text-7xl font-black leading-none">--</span>
                        <span class="text-xl font-bold mb-2">äººãŒã‚ªãƒ³ãƒ©ã‚¤ãƒ³</span>
                    </div>
                </div>
                <div class="absolute -right-8 -bottom-8 text-[12rem] opacity-10 group-hover:scale-110 transition-transform">ğŸ’¬</div>
            </div>

            <div class="bg-slate-900 p-10 rounded-[3rem] text-white flex flex-col justify-center border border-white/10 shadow-xl">
                <div class="flex items-center gap-4 mb-4">
                    <div class="w-4 h-4 bg-green-500 rounded-full animate-pulse shadow-[0_0_20px_rgba(34,197,94,0.8)]"></div>
                    <span class="text-2xl font-black">System Operational</span>
                </div>
                <p class="text-slate-400 font-bold text-sm">ã‚µãƒ¼ãƒãƒ¼ã¯ç¾åœ¨æ­£å¸¸ã«ç¨¼åƒã—ã¦ãŠã‚Šã€ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚‚ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ã™ã€‚</p>
            </div>
        </div>

        <div class="bg-white dark:bg-slate-800 p-10 rounded-[3rem] border border-gray-100 dark:border-slate-700 shadow-sm">
            <table class="w-full text-left font-bold">
                <tr class="border-b dark:border-slate-700">
                    <th class="py-5 text-gray-400 text-xs uppercase tracking-widest">ã‚µãƒ¼ãƒãƒ¼å</th>
                    <td class="py-5 dark:text-slate-200">SESE SERVER</td>
                </tr>
                <tr class="border-b dark:border-slate-700">
                    <th class="py-5 text-gray-400 text-xs uppercase tracking-widest">ç·ãƒ¡ãƒ³ãƒãƒ¼</th>
                    <td class="py-5 dark:text-slate-200">113å</td>
                </tr>
                <tr>
                    <th class="py-5 text-gray-400 text-xs uppercase tracking-widest">è¨­ç«‹æ—¥</th>
                    <td class="py-5 dark:text-slate-200">2024å¹´ 8æœˆ 15æ—¥</td>
                </tr>
            </table>
        </div>
    </section>

    <section id="page-contact" class="page hidden fade-in max-w-3xl mx-auto space-y-10">
      <div class="text-center">
        <h2 class="text-4xl font-black dark:text-white tracking-tighter mb-4">ãŠå•ã„åˆã‚ã›</h2>
        <p class="text-gray-500 font-bold text-sm">ã‚µãƒ¼ãƒãƒ¼ã«é–¢ã™ã‚‹è³ªå•ã‚„ã€é€šå ±ç­‰ã‚’å—ã‘ä»˜ã‘ã¦ã„ã¾ã™ã€‚</p>
      </div>
      
      <div id="my-inbox" class="hidden space-y-6">
        <h3 class="text-xs font-black text-indigo-500 uppercase tracking-[0.2em] ml-2">ã‚ãªãŸã¸ã®å›ç­”</h3>
        <div id="my-replies-list" class="space-y-4"></div>
      </div>

      <div class="bg-white dark:bg-slate-800 p-10 md:p-14 rounded-[3.5rem] shadow-2xl border border-gray-100 dark:border-slate-700 relative">
        <div id="contact-loading" class="py-10 text-center">
          <div class="animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-indigo-600 mx-auto"></div>
        </div>

        <div id="contact-content" class="hidden">
          <div id="contact-guest" class="hidden text-center space-y-8">
            <div class="w-20 h-20 bg-gray-100 dark:bg-slate-900 rounded-3xl flex items-center justify-center text-4xl mx-auto">ğŸ”‘</div>
            <p class="text-gray-500 dark:text-slate-400 font-black">
                å®‰å…¨ãªé€šä¿¡ã®ãŸã‚ã€Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã‚ˆã‚‹<br>æœ¬äººç¢ºèªãŒå¿…è¦ã§ã™ã€‚
            </p>
            <a href="/auth/google" class="inline-flex items-center gap-3 bg-indigo-600 text-white px-10 py-4 rounded-2xl font-black shadow-xl hover:bg-indigo-700 transition active:scale-95">
              Googleã§ãƒ­ã‚°ã‚¤ãƒ³
            </a>
          </div>

          <div id="contact-form-container" class="hidden space-y-6">
            <div class="bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-3xl flex items-center gap-5 border border-indigo-100 dark:border-indigo-900/30">
              <img id="user-photo" src="" class="w-16 h-16 rounded-full border-4 border-white dark:border-slate-700 object-cover shadow-md bg-gray-200" alt="Avatar">
              <div>
                  <span id="user-name" class="font-black text-xl text-gray-800 dark:text-slate-100 block"></span>
                  <span class="text-[10px] text-indigo-500 font-black uppercase tracking-widest">Authenticated Account</span>
              </div>
            </div>
            
            <div class="space-y-2">
              <label class="text-xs font-black text-gray-400 uppercase tracking-widest ml-2">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹</label>
              <textarea id="contact-message" rows="6" class="w-full p-8 bg-gray-50 dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-[2rem] outline-none focus:ring-4 focus:ring-indigo-500/10 font-bold dark:text-slate-200 transition-all resize-none" placeholder="ã“ã¡ã‚‰ã«è©³ç´°ã‚’è¨˜è¿°ã—ã¦ãã ã•ã„..."></textarea>
            </div>

            <button id="submit-btn" class="w-full py-5 bg-indigo-600 text-white font-black text-lg rounded-[2rem] shadow-xl hover:bg-indigo-700 transition active:scale-[0.98] flex items-center justify-center gap-3">
              <span>é€ä¿¡ã‚’ç¢ºå®šã™ã‚‹</span>
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </section>

    <section id="page-admin" class="page hidden fade-in space-y-8">
      <div class="text-center">
        <h2 class="text-4xl font-black text-red-600 tracking-tighter">ç®¡ç†ãƒ‘ãƒãƒ«</h2>
        <p class="text-gray-400 text-xs font-black uppercase tracking-widest mt-2">Executive Dashboard</p>
      </div>
      <div id="admin-message-list" class="space-y-4 max-w-4xl mx-auto">
        <p class="text-center py-20 text-gray-400 font-bold animate-pulse">ãƒ‡ãƒ¼ã‚¿ã‚’åŒæœŸä¸­...</p>
      </div>
    </section>

    <section id="page-privacy" class="page hidden fade-in max-w-2xl mx-auto space-y-8">
      <h2 class="text-3xl font-black mb-8 text-center dark:text-white">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</h2>
      <div class="bg-white dark:bg-slate-800 p-10 rounded-[3rem] shadow-xl border border-gray-100 dark:border-slate-700 space-y-10">
        <div class="space-y-3">
            <h4 class="font-black text-indigo-500 text-sm">æƒ…å ±ã®å–å¾—ã«ã¤ã„ã¦</h4>
            <p class="text-sm font-bold text-gray-600 dark:text-slate-400 leading-relaxed">
                å½“ã‚µã‚¤ãƒˆã§ã¯ã€Googleãƒ­ã‚°ã‚¤ãƒ³ã‚’é€šã˜ã¦ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼åã€ã€Œãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ã€Œãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã€ã‚’å–å¾—ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã¯ãŠå•ã„åˆã‚ã›æ™‚ã®æœ¬äººç¢ºèªã®ã¿ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
            </p>
        </div>
        <div class="space-y-3">
            <h4 class="font-black text-indigo-500 text-sm">ä¿å­˜æœŸé–“ã¨å…¬é–‹ç¯„å›²</h4>
            <p class="text-sm font-bold text-gray-600 dark:text-slate-400 leading-relaxed">
                é€ä¿¡ã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€é‹å–¶ãƒãƒ¼ãƒ ï¼ˆã‚ªãƒ¼ãƒŠãƒ¼ãƒ»ã‚¢ãƒ‰ãƒŸãƒ³ï¼‰ã®ã¿ãŒé–²è¦§å¯èƒ½ãªçŠ¶æ…‹ã§ä¿å­˜ã•ã‚Œã¾ã™ã€‚æœ¬äººã®åŒæ„ãªãç¬¬ä¸‰è€…ã«å…¬é–‹ã•ã‚Œã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
            </p>
        </div>
      </div>
    </section>

  </main>

  <dialog id="admin-reply-modal" class="p-0 rounded-[2.5rem] overflow-hidden bg-transparent">
    <div class="bg-white dark:bg-slate-800 p-10 w-[95vw] max-w-lg shadow-2xl border border-gray-100 dark:border-slate-700">
      <h3 class="font-black text-2xl mb-2 dark:text-white">å›ç­”ã‚’ä½œæˆ</h3>
      <p class="text-gray-400 text-xs font-bold mb-6">ã“ã®å›ç­”ã¯é€ä¿¡ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã€ŒãŠå•ã„åˆã‚ã›ã€ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
      
      <textarea id="reply-textarea" class="w-full p-6 bg-gray-50 dark:bg-slate-900 border border-gray-200 dark:border-slate-700 dark:text-white rounded-2xl mb-8 outline-none focus:ring-4 focus:ring-indigo-500/10 font-bold transition-all resize-none" rows="5" placeholder="å›ç­”å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
      
      <div class="flex gap-4">
        <button id="modal-cancel" class="flex-1 py-4 bg-gray-100 dark:bg-slate-700 dark:text-white rounded-2xl font-black text-sm hover:bg-gray-200 transition">é–‰ã˜ã‚‹</button>
        <button id="modal-send" class="flex-1 py-4 bg-indigo-600 text-white rounded-2xl font-black text-sm hover:bg-indigo-700 shadow-lg shadow-indigo-600/20 transition">é€ä¿¡ã‚’å®Œäº†ã™ã‚‹</button>
      </div>
    </div>
  </dialog>

  <footer class="py-16 text-center border-t border-gray-100 dark:border-slate-800">
    <div class="max-w-7xl mx-auto px-4">
        <div class="flex justify-center gap-6 mb-8 text-[11px] font-black text-gray-400 dark:text-slate-500 uppercase tracking-widest">
            <button data-route="guidelines" class="js-router-link hover:text-indigo-600 transition">è¦ç´„</button>
            <button data-route="privacy" class="js-router-link hover:text-indigo-600 transition">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼</button>
            <button data-route="contact" class="js-router-link hover:text-indigo-600 transition">é€£çµ¡</button>
        </div>
        <p class="text-[10px] text-gray-400 dark:text-slate-600 font-bold uppercase tracking-widest">
            &copy; 2024-2026 SESE SERVER Portal System.
        </p>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      let currentUser = null;
      let lastSubmitTime = 0;
      const SUBMIT_COOLDOWN = 10000;
      let currentMsgId = null;

      // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: HTMLã‚µãƒ‹ã‚¿ã‚¤ã‚º
      function escapeHTML(str) { 
        return str ? DOMPurify.sanitize(str) : ""; 
      }

      // ãƒšãƒ¼ã‚¸é·ç§»åˆ¶å¾¡ (ãƒ«ãƒ¼ã‚¿ãƒ¼)
      function router(route) {
        document.querySelectorAll('.page').forEach(el => el.classList.add('hidden'));
        document.querySelectorAll('.nav-btn').forEach(btn => {
          const isActive = btn.dataset.route === route;
          btn.classList.toggle('bg-indigo-50', isActive);
          btn.classList.toggle('dark:bg-indigo-900/30', isActive);
          btn.classList.toggle('text-indigo-600', isActive);
          btn.classList.toggle('dark:text-indigo-400', isActive);
        });
        
        const target = document.getElementById(`page-${route}`);
        if(target) target.classList.remove('hidden');
        
        // ãƒšãƒ¼ã‚¸ã”ã¨ã®ãƒ‡ãƒ¼ã‚¿å–å¾—
        if(route === 'contact') { renderContactArea(); loadMyMessages(); }
        if(route === 'admin') loadAdminMessages();
        if(route === 'serverinfo') updateDiscordWidget();
        
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }

      // ã‚¤ãƒ™ãƒ³ãƒˆå§”è­²ã«ã‚ˆã‚‹ã‚¯ãƒªãƒƒã‚¯æ¤œçŸ¥
      document.body.addEventListener('click', (e) => {
        const link = e.target.closest('.js-router-link');
        if (link) { e.preventDefault(); router(link.dataset.route); }
      });

      // ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã®ç¢ºèª
      async function checkLogin() {
        try {
          const res = await fetch('/api/user');
          const data = await res.json();
          const ua = document.getElementById('user-area');
          
          if (data.isLoggedIn) {
            currentUser = data.user;
            // ãƒ˜ãƒƒãƒ€ãƒ¼ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡¨ç¤º
            ua.innerHTML = `
              <div class="flex items-center gap-3 bg-gray-100 dark:bg-slate-800 p-1 pr-4 rounded-full border border-gray-200 dark:border-slate-700">
                <img src="${escapeHTML(data.user.photo)}" class="w-8 h-8 rounded-full shadow-sm" onerror="this.src='https://ui-avatars.com/api/?name=User'">
                <a href="/logout" class="text-[10px] font-black text-red-500 hover:text-red-700">LOGOUT</a>
              </div>`;
            
            // ç®¡ç†è€…ãƒœã‚¿ãƒ³è¡¨ç¤º
            if (data.isAdmin) document.getElementById('nav-admin')?.classList.remove('hidden');
          } else {
            ua.innerHTML = `<a href="/auth/google" class="text-xs font-black text-white px-6 py-2.5 bg-indigo-600 rounded-full shadow-lg shadow-indigo-600/20 hover:bg-indigo-700 transition">ãƒ­ã‚°ã‚¤ãƒ³</a>`;
          }
          renderContactArea();
        } catch (e) {
          document.getElementById('user-area').innerHTML = `<a href="/auth/google" class="text-xs font-black text-white px-6 py-2.5 bg-indigo-600 rounded-full">ãƒ­ã‚°ã‚¤ãƒ³</a>`;
        }
      }

      // ãŠå•ã„åˆã‚ã›ã‚¨ãƒªã‚¢ã®æç”»
      function renderContactArea() {
        const loading = document.getElementById('contact-loading');
        const content = document.getElementById('contact-content');
        if(!loading) return;
        
        loading.classList.add('hidden');
        content.classList.remove('hidden');
        
        if(currentUser) {
          document.getElementById('contact-guest').classList.add('hidden');
          document.getElementById('contact-form-container').classList.remove('hidden');
          document.getElementById('user-name').innerText = currentUser.name;
          
          const photoImg = document.getElementById('user-photo');
          photoImg.src = currentUser.photo;
          // ç”»åƒèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
          photoImg.onerror = () => { photoImg.src = 'https://ui-avatars.com/api/?name=' + encodeURIComponent(currentUser.name); };
        } else {
          document.getElementById('contact-guest').classList.remove('hidden');
          document.getElementById('contact-form-container').classList.add('hidden');
        }
      }

      // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
      document.getElementById('submit-btn')?.addEventListener('click', async () => {
        const msgInput = document.getElementById('contact-message');
        const msg = msgInput.value.trim();
        if(!msg) return alert('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');

        const now = Date.now();
        if (now - lastSubmitTime < SUBMIT_COOLDOWN) return alert('çŸ­æ™‚é–“ã«ä½•åº¦ã‚‚é€ä¿¡ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚');
        lastSubmitTime = now;

        const btn = document.getElementById('submit-btn');
        btn.disabled = true;
        btn.innerText = 'é€ä¿¡ä¸­...';

        try {
          const res = await fetch('/api/contact', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ message: msg })
          });
          const result = await res.json();
          if(result.success) {
            alert('é‹å–¶ã¸é€ä¿¡ã—ã¾ã—ãŸã€‚');
            msgInput.value = '';
            loadMyMessages();
          } else {
            alert('é€ä¿¡ã‚¨ãƒ©ãƒ¼: ' + result.error);
          }
        } catch (err) {
          alert('é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
        } finally {
          btn.disabled = false;
          btn.innerText = 'é€ä¿¡ã‚’ç¢ºå®šã™ã‚‹';
        }
      });

      // ãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªä¿¡ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´ã¨å›ç­”ã®å–å¾—
      async function loadMyMessages() {
        if(!currentUser) return;
        try {
          const res = await fetch('/api/my-messages');
          const data = await res.json();
          const list = document.getElementById('my-replies-list');
          
          if(data.messages && data.messages.some(m => m.reply)) {
            document.getElementById('my-inbox').classList.remove('hidden');
            list.innerHTML = data.messages.filter(m => m.reply).map(m => `
              <div class="bg-white dark:bg-slate-800 p-6 rounded-3xl border-l-4 border-indigo-500 shadow-sm fade-in">
                <div class="text-[10px] text-gray-400 font-black mb-3 opacity-60 uppercase tracking-widest">Your Question</div>
                <p class="text-xs font-bold text-gray-500 dark:text-slate-400 mb-4">${escapeHTML(m.content)}</p>
                <div class="p-5 bg-indigo-50 dark:bg-indigo-900/20 rounded-2xl border border-indigo-100 dark:border-indigo-900/30">
                    <span class="text-[10px] font-black text-indigo-500 block mb-1 uppercase tracking-widest">Admin Reply</span>
                    <p class="text-sm font-black text-gray-800 dark:text-slate-100">${escapeHTML(m.reply)}</p>
                </div>
              </div>
            `).reverse().join('');
          }
        } catch (e) {}
      }

      // ç®¡ç†è€…ï¼šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒªã‚¹ãƒˆã®å–å¾—
      async function loadAdminMessages() {
        const list = document.getElementById('admin-message-list');
        try {
          const res = await fetch('/api/admin/messages');
          if(res.status === 403) { list.innerHTML = '<p class="text-red-500 font-bold text-center">ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦: ç®¡ç†è€…æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>'; return; }
          
          const data = await res.json();
          if(!data.messages || data.messages.length === 0) {
            list.innerHTML = '<div class="text-center py-20 text-gray-400 font-black tracking-widest uppercase">No messages found</div>';
            return;
          }
          
          list.innerHTML = data.messages.map(m => `
            <div class="p-8 bg-white dark:bg-slate-800 rounded-[2.5rem] border border-gray-100 dark:border-slate-700 shadow-sm group hover:border-indigo-200 transition-colors">
              <div class="flex justify-between items-start mb-6">
                <div class="flex items-center gap-3">
                    <img src="${escapeHTML(m.userPhoto)}" class="w-10 h-10 rounded-full border-2 border-white shadow-sm" onerror="this.src='https://ui-avatars.com/api/?name=User'">
                    <div>
                        <span class="block text-sm font-black text-gray-800 dark:text-slate-200">${escapeHTML(m.userName)}</span>
                        <span class="block text-[10px] text-gray-400 font-bold">${escapeHTML(m.email)}</span>
                    </div>
                </div>
                <span class="text-[9px] text-gray-400 font-bold bg-gray-50 dark:bg-slate-900 px-3 py-1 rounded-full">${escapeHTML(m.timestamp)}</span>
              </div>
              <p class="text-sm font-bold text-gray-600 dark:text-slate-300 mb-6 leading-relaxed bg-gray-50 dark:bg-slate-900/50 p-5 rounded-2xl break-words">${escapeHTML(m.content)}</p>
              ${m.reply ? `
                <div class="p-4 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 text-xs rounded-xl font-black mb-6 border border-green-100 dark:border-green-900/30">
                    å›ç­”æ¸ˆ: ${escapeHTML(m.reply)}
                </div>` : ''}
              <button data-id="${m.id}" class="admin-reply-trigger w-full py-3 bg-slate-900 dark:bg-slate-700 text-white text-xs font-black rounded-xl hover:bg-indigo-600 transition-colors">
                è¿”ä¿¡ã‚’è¨˜è¿°ã™ã‚‹
              </button>
            </div>
          `).reverse().join('');

          // è¿”ä¿¡ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆç´ä»˜ã‘
          document.querySelectorAll('.admin-reply-trigger').forEach(btn => {
            btn.onclick = () => {
              currentMsgId = btn.dataset.id;
              document.getElementById('reply-textarea').value = '';
              document.getElementById('admin-reply-modal').showModal();
            };
          });
        } catch (e) { list.innerHTML = 'èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚'; }
      }

      // ç®¡ç†è€…ï¼šå›ç­”é€ä¿¡å‡¦ç†
      const modal = document.getElementById('admin-reply-modal');
      document.getElementById('modal-cancel').onclick = () => modal.close();
      document.getElementById('modal-send').onclick = async () => {
        const text = document.getElementById('reply-textarea').value.trim();
        if(!text || !currentMsgId) return;
        
        try {
          const res = await fetch('/api/admin/reply', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ messageId: currentMsgId, replyContent: text })
          });
          if((await res.json()).success) {
            modal.close();
            loadAdminMessages();
          } else {
            alert('å›ç­”ã®é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
          }
        } catch (e) { alert('é€šä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚'); }
      };

      // Discord Widget é€£æº
      async function updateDiscordWidget() {
        try {
          const res = await fetch('https://discord.com/api/guilds/1405840878290993196/widget.json');
          const data = await res.json();
          const countEl = document.getElementById('online-count');
          if(countEl) countEl.innerText = data.presence_count || '0';
        } catch(e) { 
          if(document.getElementById('online-count')) document.getElementById('online-count').innerText = '??';
        }
      }

      // åˆæœŸèµ·å‹•
      checkLogin();
      router('home');
      updateDiscordWidget();
      setInterval(updateDiscordWidget, 60000); // 1åˆ†ã”ã¨ã«æ›´æ–°

    });
  </script>
</body>
</html>
