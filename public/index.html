<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SESE鯖 - HTML版</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gray-50">
  <header class="bg-white shadow-sm sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex items-center justify-between py-3">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center text-white font-bold">
            SE
          </div>
          <div class="font-bold text-lg">SESE鯖</div>
        </div>

        <nav id="nav-desktop" class="hidden md:flex gap-3">
          <button data-page="home" class="nav-btn px-3 py-2 rounded-lg transition-colors text-gray-600 hover:bg-gray-50">ホーム</button>
          <button data-page="guidelines" class="nav-btn px-3 py-2 rounded-lg transition-colors text-gray-600 hover:bg-gray-50">ガイドライン</button>
          <button data-page="staff" class="nav-btn px-3 py-2 rounded-lg transition-colors text-gray-600 hover:bg-gray-50">運営紹介</button>
          <button data-page="serverinfo" class="nav-btn px-3 py-2 rounded-lg transition-colors text-gray-600 hover:bg-gray-50">サーバー情報</button>
          <button data-page="contact" class="nav-btn px-3 py-2 rounded-lg transition-colors text-gray-600 hover:bg-gray-50">お問い合わせ</button>
        </nav>

        <div class="flex items-center gap-3">
          <div id="user-area" class="flex items-center gap-3">
            <!-- Filled by JS -->
            <button id="login-open" class="px-4 py-2 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700">ログイン</button>
          </div>

          <button id="menu-toggle" class="md:hidden p-2 hover:bg-gray-100 rounded-lg">☰</button>
        </div>
      </div>

      <div id="mobile-menu" class="md:hidden border-t border-gray-200 py-2 hidden">
        <div class="flex flex-col gap-1 px-1">
          <button data-page="home" class="nav-btn px-3 py-2 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 text-left">ホーム</button>
          <button data-page="guidelines" class="nav-btn px-3 py-2 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 text-left">ガイドライン</button>
          <button data-page="staff" class="nav-btn px-3 py-2 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 text-left">運営紹介</button>
          <button data-page="serverinfo" class="nav-btn px-3 py-2 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 text-left">サーバー情報</button>
          <button data-page="contact" class="nav-btn px-3 py-2 rounded-lg transition-colors text-gray-600 hover:bg-gray-50 text-left">お問い合わせ</button>
        </div>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 py-7">
    <!-- HOME -->
    <section data-page="home" class="page">
      <div class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl p-7 mb-6">
        <h1 class="text-3xl font-bold mb-2">SESE鯖へようこそ</h1>
        <p class="mb-4">Discordコミュニティサーバー - 楽しく、安全に交流しましょう</p>
        <div class="flex gap-3 flex-wrap">
          <button id="goto-guidelines" class="px-4 py-2 bg-white text-indigo-600 rounded-lg font-semibold hover:bg-indigo-50">ガイドラインを読む</button>
          <button id="goto-contact" class="px-4 py-2 bg-indigo-800 text-white rounded-lg font-semibold hover:bg-indigo-900">お問い合わせ</button>
        </div>
      </div>

      <div class="grid md:grid-cols-3 gap-4 mb-6">
        <div class="bg-white p-5 rounded-xl shadow-sm">
          <div class="text-3xl mb-2">🛡️</div>
          <h3 class="font-bold mb-2">安全なコミュニティ</h3>
          <p class="text-gray-600 text-sm">明確なガイドラインで安心して交流できます</p>
        </div>
        <div class="bg-white p-5 rounded-xl shadow-sm">
          <div class="text-3xl mb-2">👥</div>
          <h3 class="font-bold mb-2">活発な交流</h3>
          <p class="text-gray-600 text-sm">113人のメンバーが参加中</p>
        </div>
        <div class="bg-white p-5 rounded-xl shadow-sm">
          <div class="text-3xl mb-2">💬</div>
          <h3 class="font-bold mb-2">充実した機能</h3>
          <p class="text-gray-600 text-sm">56個のチャンネルで様々な話題を楽しめます</p>
        </div>
      </div>

      <div class="bg-amber-50 border-l-4 border-amber-500 p-4 rounded-lg">
        <div class="flex gap-3">
          <div class="text-xl">⚠️</div>
          <div>
            <h3 class="font-bold text-amber-900 mb-1">重要なお知らせ</h3>
            <p class="text-amber-900 text-sm">参加前に必ずガイドラインをお読みください。規約違反には段階的な処分があります。</p>
          </div>
        </div>
      </div>
    </section>

    <!-- GUIDELINES -->
    <section data-page="guidelines" class="page hidden">
      <h1 class="text-2xl font-bold mb-4">SESE鯖ガイドライン</h1>

      <div class="bg-white p-5 rounded-xl shadow-sm mb-4">
        <h2 class="text-lg font-bold mb-2">📚 第一章 - 定義</h2>
        <p class="text-gray-600"><strong>第一条:</strong> seseのDiscord鯖（以降「この鯖」と呼ぶ）での規則を指す。</p>
      </div>

      <div class="bg-white p-5 rounded-xl shadow-sm mb-4">
        <h2 class="text-lg font-bold mb-3">⚠️ 第二章 - スパムについて</h2>

        <h3 class="font-bold mb-2">第二条 - 禁止行為の定義</h3>
        <ul class="list-disc pl-5 text-gray-600 space-y-1 mb-4">
          <li>サブ垢やbotなどを利用しサーバー人数を膨張させること</li>
          <li>誤った、または誤解を招く情報を共有すること</li>
          <li>なりすましなどの行為</li>
          <li>著作権侵害に関する発言</li>
          <li>暴言、侮辱、人格攻撃</li>
          <li>無意味な連続投稿、同内容の連投</li>
        </ul>

        <h3 class="font-bold mb-2">第三条 - 罰則</h3>
        <div class="space-y-2">
          <div class="bg-amber-50 border-l-4 border-amber-500 p-3 rounded">
            <strong>1. タイムアウト</strong>
            <div class="text-sm text-gray-600">暴言、チートに関する発言</div>
          </div>
          <div class="bg-orange-50 border-l-4 border-orange-500 p-3 rounded">
            <strong>2. キック（強制退出）</strong>
            <div class="text-sm text-gray-600">スパム、意味の無い長文</div>
          </div>
          <div class="bg-red-50 border-l-4 border-red-500 p-3 rounded">
            <strong>3. BAN</strong>
            <div class="text-sm text-gray-600">荒らしBOTによるスパム</div>
          </div>
        </div>
      </div>

      <div class="bg-white p-5 rounded-xl shadow-sm">
        <h2 class="text-lg font-bold mb-2">🛡️ 第三章 - 相互敬意</h2>
        <p class="text-gray-600 mb-2"><strong>第四条:</strong> ハラスメントに関与する行為・発言は禁止されています。</p>
        <p class="text-gray-600"><strong>第五条:</strong> 他の個人またはグループに対し、危害を与える旨の脅迫行為は禁止されています。</p>
      </div>
    </section>

    <!-- STAFF -->
    <section data-page="staff" class="page hidden">
      <h1 class="text-2xl font-bold mb-4">運営・モデレーター紹介</h1>

      <div class="bg-gradient-to-r from-amber-500 to-orange-500 text-white p-5 rounded-xl mb-4">
        <div class="flex items-center gap-3">
          <div class="text-2xl">👑</div>
          <div>
            <h2 class="text-lg font-bold">オーナー</h2>
            <div class="bg-white bg-opacity-20 p-3 rounded-lg mt-2">
              <p class="font-bold">@sese_PAP_1122</p>
              <p class="text-sm">サーバーの創設者・最高責任者</p>
            </div>
          </div>
        </div>
      </div>

      <div class="bg-white p-5 rounded-xl shadow-sm mb-4">
        <div class="flex items-center gap-3 mb-3">
          <div class="text-2xl">🛡️</div>
          <h2 class="text-lg font-bold">運営（アドミン）</h2>
        </div>
        <div class="space-y-2">
          <div class="bg-indigo-50 p-3 rounded-lg"><strong>@creeper_dev</strong></div>
          <div class="bg-indigo-50 p-3 rounded-lg"><strong>@7498</strong></div>
          <div class="bg-indigo-50 p-3 rounded-lg"><strong>@supernova</strong></div>
        </div>
      </div>

      <div class="bg-white p-5 rounded-xl shadow-sm">
        <div class="flex items-center gap-3 mb-3">
          <div class="text-2xl">👥</div>
          <h2 class="text-lg font-bold">モデレーター</h2>
        </div>
        <div class="space-y-2">
          <div class="bg-purple-50 p-3 rounded-lg"><strong>@kuroneko22_22_sabu</strong></div>
          <div class="bg-purple-50 p-3 rounded-lg"><strong>@yshi</strong></div>
        </div>
      </div>
    </section>

    <!-- SERVER INFO -->
    <section data-page="serverinfo" class="page hidden">
      <h1 class="text-2xl font-bold mb-4">サーバー情報</h1>

      <div class="grid md:grid-cols-2 gap-4">
        <div class="bg-white p-5 rounded-xl shadow-sm">
          <h3 class="text-indigo-600 font-bold mb-3">基本情報</h3>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span class="font-semibold">サーバーID:</span>
              <span class="text-gray-600">1405840878290993196</span>
            </div>
            <div class="flex justify-between">
              <span class="font-semibold">所有者:</span>
              <span class="text-gray-600">@sese_PAP_1122</span>
            </div>
            <div class="flex justify-between">
              <span class="font-semibold">作成日:</span>
              <span class="text-gray-600">2024/8/15</span>
            </div>
          </div>
        </div>

        <div class="bg-white p-5 rounded-xl shadow-sm">
          <h3 class="text-purple-600 font-bold mb-3">メンバー統計</h3>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span class="font-semibold">総人数:</span>
              <span class="text-gray-600">113人</span>
            </div>
            <div class="flex justify-between">
              <span class="font-semibold">ユーザー:</span>
              <span class="text-gray-600">85人</span>
            </div>
            <div class="flex justify-between">
              <span class="font-semibold">BOT:</span>
              <span class="text-gray-600">28人</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section data-page="contact" class="page hidden">
      <h1 class="text-2xl font-bold mb-4">お問い合わせ</h1>

      <div id="contact-box" class="bg-white p-5 rounded-xl shadow-sm">
        <!-- Filled by JS depending on login -->
      </div>
    </section>
  </main>

  <!-- Modal -->
  <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 hidden">
    <div class="bg-white rounded-xl max-w-md w-full p-6">
      <div class="flex justify-between items-center mb-4">
        <h3 id="modal-title" class="text-lg font-semibold">ログイン</h3>
        <button id="modal-close" class="text-gray-500 hover:text-gray-700">✕</button>
      </div>

      <div id="modal-error" class="text-red-500 text-sm mb-2 hidden"></div>

      <div id="modal-body">
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1">名前</label>
          <input id="input-name" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="名前（登録時のみ）">
        </div>
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1">メールアドレス</label>
          <input id="input-email" type="email" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="example@example.com">
        </div>
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1">パスワード</label>
          <input id="input-password" type="password" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="パスワード">
        </div>

        <div class="flex gap-3">
          <button id="modal-submit" class="flex-1 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg">送信</button>
          <button id="switch-to-register" class="px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg font-semibold hover:bg-indigo-50">新規登録に切替</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- Simple state management (vanilla JS) to mimic the React behavior ---
    const pages = document.querySelectorAll('.page');
    const navButtons = document.querySelectorAll('.nav-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuToggle = document.getElementById('menu-toggle');
    const userArea = document.getElementById('user-area');
    const loginOpenBtn = document.getElementById('login-open');
    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modal-title');
    const modalClose = document.getElementById('modal-close');
    const modalError = document.getElementById('modal-error');
    const modalSubmit = document.getElementById('modal-submit');
    const switchToRegister = document.getElementById('switch-to-register');

    const inputName = document.getElementById('input-name');
    const inputEmail = document.getElementById('input-email');
    const inputPassword = document.getElementById('input-password');

    const gotoGuidelines = document.getElementById('goto-guidelines');
    const gotoContact = document.getElementById('goto-contact');

    let currentPage = 'home';
    let menuOpen = false;
    let showModal = false;
    let modalType = 'login'; // 'login' or 'register'
    let isSubmitting = false;

    const contactBox = document.getElementById('contact-box');

    function setCurrentPage(page) {
      currentPage = page;
      pages.forEach(p => p.classList.add('hidden'));
      const el = document.querySelector(`[data-page="${page}"]`);
      if (el) el.classList.remove('hidden');
      // update nav active states
      navButtons.forEach(btn => {
        if (btn.dataset.page === page) {
          btn.classList.add('bg-indigo-50', 'text-indigo-600','font-semibold');
          btn.classList.remove('text-gray-600');
        } else {
          btn.classList.remove('bg-indigo-50', 'text-indigo-600','font-semibold');
          btn.classList.add('text-gray-600');
        }
      });
      // close mobile menu
      mobileMenu.classList.add('hidden');
      menuOpen = false;

      // If contact page, refresh contact box
      if (page === 'contact') renderContactBox();
    }

    navButtons.forEach(btn => {
      btn.addEventListener('click', (e) => setCurrentPage(btn.dataset.page));
    });

    gotoGuidelines.addEventListener('click', () => setCurrentPage('guidelines'));
    gotoContact.addEventListener('click', () => {
      if (getUser()) {
        setCurrentPage('contact');
      } else {
        openModal('login');
      }
    });

    menuToggle.addEventListener('click', () => {
      menuOpen = !menuOpen;
      mobileMenu.classList.toggle('hidden', !menuOpen ? true : false);
    });

    function openModal(type = 'login') {
      modalType = type;
      showModal = true;
      modal.classList.remove('hidden');
      modalError.classList.add('hidden');
      if (type === 'login') {
        modalTitle.textContent = 'ログイン';
        switchToRegister.textContent = '新規登録に切替';
        inputName.style.display = 'none';
      } else {
        modalTitle.textContent = '新規登録';
        switchToRegister.textContent = 'ログインに切替';
        inputName.style.display = 'block';
      }
      inputPassword.value = '';
    }

    function closeModal() {
      showModal = false;
      modal.classList.add('hidden');
    }

    modalClose.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => {
      if (e.target === modal) closeModal();
    });

    switchToRegister.addEventListener('click', () => {
      openModal(modalType === 'login' ? 'register' : 'login');
    });

    modalSubmit.addEventListener('click', async () => {
      if (modalType === 'login') {
        await handleLogin();
      } else {
        await handleRegister();
      }
    });

    // --- Simple "API" using localStorage (mock) ---
    function setUser(user) {
      localStorage.setItem('sese_user', JSON.stringify(user));
      renderUserArea();
    }
    function clearUser() {
      localStorage.removeItem('sese_user');
      renderUserArea();
    }
    function getUser() {
      const raw = localStorage.getItem('sese_user');
      return raw ? JSON.parse(raw) : null;
    }

    function renderUserArea() {
      const user = getUser();
      userArea.innerHTML = '';
      if (user) {
        const nameDiv = document.createElement('div');
        nameDiv.className = 'hidden md:block text-sm font-medium text-gray-700';
        nameDiv.textContent = user.name;
        const logoutBtn = document.createElement('button');
        logoutBtn.className = 'px-4 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50';
        logoutBtn.textContent = 'ログアウト';
        logoutBtn.addEventListener('click', () => {
          clearUser();
          setCurrentPage('home');
          alert('ログアウトしました');
        });
        userArea.appendChild(nameDiv);
        userArea.appendChild(logoutBtn);
      } else {
        const loginBtn = document.createElement('button');
        loginBtn.id = 'login-open-2';
        loginBtn.className = 'px-4 py-2 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700';
        loginBtn.textContent = 'ログイン';
        loginBtn.addEventListener('click', () => openModal('login'));
        userArea.appendChild(loginBtn);
      }

      // update contact box if on contact page
      if (currentPage === 'contact') renderContactBox();
    }

    async function handleRegister() {
      modalError.classList.add('hidden');
      const name = inputName.value.trim();
      const email = inputEmail.value.trim();
      const password = inputPassword.value;

      if (!name || !email || !password) {
        showModalError('すべての項目を入力してください');
        return;
      }

      // naive "already registered" check
      const users = JSON.parse(localStorage.getItem('sese_accounts') || '[]');
      if (users.find(u => u.email === email)) {
        showModalError('そのメールアドレスは既に登録されています');
        return;
      }

      // register
      const newUser = { name, email };
      users.push({ name, email, password });
      localStorage.setItem('sese_accounts', JSON.stringify(users));
      setUser(newUser);
      closeModal();
      setCurrentPage('contact');
      alert('✅ 登録が完了しました！');
    }

    async function handleLogin() {
      modalError.classList.add('hidden');
      const email = inputEmail.value.trim();
      const password = inputPassword.value;

      if (!email || !password) {
        showModalError('メールアドレスとパスワードを入力してください');
        return;
      }

      const users = JSON.parse(localStorage.getItem('sese_accounts') || '[]');
      const found = users.find(u => u.email === email && u.password === password);
      if (!found) {
        showModalError('メールアドレスまたはパスワードが正しくありません');
        return;
      }

      setUser({ name: found.name, email: found.email });
      closeModal();
      setCurrentPage('contact');
      alert('✅ ログインしました！');
    }

    function showModalError(msg) {
      modalError.textContent = msg;
      modalError.classList.remove('hidden');
    }

    // CONTACT rendering
    function renderContactBox() {
      const user = getUser();
      contactBox.innerHTML = '';
      if (!user) {
        contactBox.innerHTML = `
          <h2 class="font-bold mb-2">ログインが必要です</h2>
          <p class="text-gray-600 mb-4">お問い合わせには、ログインが必要です。</p>
          <div class="flex gap-3">
            <button id="contact-login" class="px-4 py-2 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700">ログイン</button>
            <button id="contact-register" class="px-4 py-2 border border-indigo-600 text-indigo-600 rounded-lg font-semibold hover:bg-indigo-50">新規登録</button>
          </div>
        `;
        document.getElementById('contact-login').addEventListener('click', () => openModal('login'));
        document.getElementById('contact-register').addEventListener('click', () => openModal('register'));
      } else {
        contactBox.innerHTML = `
          <div class="bg-green-50 border border-green-200 p-3 rounded-lg mb-4">
            <div class="font-semibold">ログイン中: ${escapeHtml(user.name)}</div>
            <div class="text-sm text-gray-600">${esapeHtml(user.name)}</div>
            <div class="text-sm text-gray-600">${escapeHtml(user.email)}</div>
          </div>

          <div>
            <div class="mb-4">
              <label class="block text-sm font-medium mb-1">お名前</label>
              <input type="text" id="contact-name" value="${escapeHtml(user.name)}" class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50" disabled />
            </div>
            <div class="mb-4">
              <label class="block text-sm font-medium mb-1">メールアドレス</label>
              <input type="email" id="contact-email" value="${escapeHtml(user.email)}" class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50" disabled />
            </div>
            <div class="mb-4">
              <label class="block text-sm font-medium mb-1">お問い合わせ内容 *</label>
              <textarea id="contact-message" rows="6" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent" placeholder="お問い合わせ内容をご記入ください"></textarea>
            </div>
            <div class="flex gap-3">
              <button id="contact-submit" class="flex-1 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg">送信する</button>
              <button id="contact-logout" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">ログアウト</button>
            </div>
          </div>
        `;
        document.getElementById('contact-submit').addEventListener('click', handleSubmitContact);
        document.getElementById('contact-logout').addEventListener('click', () => {
          clearUser();
          setCurrentPage('home');
          alert('ログアウトしました');
        });
      }
    }

    function handleSubmitContact() {
      const msgEl = document.getElementById('contact-message');
      if (!msgEl || !msgEl.value.trim()) {
        alert('お問い合わせ内容を入力してください。');
        return;
      }
      // In the original React, this posts to API with Authorization. Here we just alert and clear.
      alert('✅ お問い合わせを受け付けました。運営から返信をお待ちください。');
      msgEl.value = '';
    }

    // small utility to avoid injection when inserting user data into HTML
    function escapeHtml(str) {
      return (str + '').replace(/[&<>"']/g, function (s) {
        return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[s]);
      });
    }

    // init
    (function init() {
      // wire header login button (there are two possible login buttons)
      const loginBtn = document.getElementById('login-open');
      if (loginBtn) loginBtn.addEventListener('click', () => openModal('login'));
      setCurrentPage('home');
      renderUserArea();
    })();
  </script>
</body>
</html>