<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SESE鯖 公式サイト</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Noto Sans JP', sans-serif; word-break: break-all; }
    .fade-in { animation: fadeIn 0.5s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .nav-active { color: #4f46e5; border-bottom: 2px solid #4f46e5; }
    .bg-discord { background-color: #5865F2; }
    .bg-main-dark { background-color: #1a1c23; }
    /* スクロールバーの調整 */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #f1f1f1; }
    ::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }
  </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-800">

  <header class="bg-white/95 backdrop-blur-sm shadow-sm sticky top-0 z-50 border-b border-slate-200">
    <div class="max-w-7xl mx-auto px-4 md:px-6">
      <div class="flex items-center justify-between py-4">
        <div class="flex items-center gap-3 cursor-pointer" onclick="router('home')">
          <div class="w-10 h-10 rounded-xl bg-main-dark flex items-center justify-center text-white shadow-lg">
            <span class="font-bold text-xl">S</span>
          </div>
          <div class="font-black text-xl tracking-tight text-slate-900">SESE鯖</div>
        </div>

        <nav class="hidden md:flex items-center gap-8">
          <button onclick="router('home')" class="nav-btn text-sm font-bold text-slate-500 hover:text-indigo-600 transition-all">ホーム</button>
          <button onclick="router('guidelines')" class="nav-btn text-sm font-bold text-slate-500 hover:text-indigo-600 transition-all">ガイドライン</button>
          <button onclick="router('staff')" class="nav-btn text-sm font-bold text-slate-500 hover:text-indigo-600 transition-all">運営紹介</button>
          <button onclick="router('contact')" class="nav-btn text-sm font-bold text-slate-500 hover:text-indigo-600 transition-all">お問い合わせ</button>
        </nav>

        <div class="flex items-center gap-3">
          <a href="https://discord.gg/WEWgXFss9p" target="_blank" class="bg-discord text-white px-5 py-2 rounded-lg text-sm font-bold hover:opacity-90 transition shadow-md flex items-center gap-2">
            Discordへ参加
          </a>
          <div id="user-area"></div>
        </div>
      </div>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-4 py-10">
    
    <section id="page-home" class="page fade-in">
      <div class="rounded-[2rem] bg-main-dark p-10 md:p-20 text-center shadow-2xl mb-12 text-white relative overflow-hidden">
        <div class="relative z-10">
          <h1 class="text-4xl md:text-6xl font-black mb-6 leading-tight">
            自由な雑談と、<br>確かな安心を。
          </h1>
          <p class="text-slate-400 text-lg mb-10 max-w-2xl mx-auto font-medium">
            SESE鯖は、オーナー sese & MRF を中心に運営される、<br class="hidden md:block">
            誰もが安心して交流を楽しめるDiscordサーバーです。
          </p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="https://discord.gg/WEWgXFss9p" target="_blank" class="bg-discord px-10 py-4 rounded-xl text-white font-bold text-lg hover:scale-105 transition-all">
              サーバーに入る
            </a>
            <button onclick="router('guidelines')" class="px-10 py-4 bg-white/10 rounded-xl text-white font-bold text-lg hover:bg-white/20 transition-all border border-white/20">
              ルールを見る
            </button>
          </div>
        </div>
      </div>

      <div class="grid md:grid-cols-2 gap-8">
        <div class="bg-white p-8 rounded-2xl shadow-sm border border-slate-200">
          <h3 class="font-bold text-xl mb-3 flex items-center gap-2">
            <span class="text-indigo-600">●</span> 健全なコミュニティ
          </h3>
          <p class="text-slate-600 text-sm">独自のガイドラインに基づき、暴言や荒らし行為を徹底して管理しています。初めての方でも安心してご参加いただけます。</p>
        </div>
        <div class="bg-white p-8 rounded-2xl shadow-sm border border-slate-200">
          <h3 class="font-bold text-xl mb-3 flex items-center gap-2">
            <span class="text-indigo-600">●</span> 透明性のある運営
          </h3>
          <p class="text-slate-600 text-sm">権限の分散と相互監視により、公平な運営を行っています。ユーザーの皆様の意見を大切にする風通しの良い環境です。</p>
        </div>
      </div>
    </section>

    <section id="page-guidelines" class="page hidden fade-in max-w-4xl mx-auto">
      <div class="bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden">
        <div class="bg-slate-900 p-8 text-white">
          <h2 class="text-3xl font-black tracking-tight">SESE鯖ガイドライン</h2>
          <p class="text-slate-400 mt-2 text-sm">この規約は、全ての参加者に適用される重要なルールです。</p>
        </div>
        
        <div class="p-8 md:p-12 space-y-12">
          <section>
            <h3 class="text-xl font-black border-l-4 border-indigo-600 pl-4 mb-4">第一章（定義）</h3>
            <p class="text-slate-700 font-medium">第一条：本規約は、seseのDiscordサーバー（以降「この鯖」）での規則を指します。</p>
          </section>

          <section class="space-y-4">
            <h3 class="text-xl font-black border-l-4 border-indigo-600 pl-4 mb-4">第二章（スパムについて）</h3>
            <div class="bg-slate-50 p-6 rounded-2xl">
              <h4 class="font-bold mb-4 text-slate-900">第二条（禁止行為の定義）</h4>
              <ul class="space-y-3 text-sm text-slate-700">
                <li>・サブ垢やbot等を利用したサーバー人数の膨張（多重アカウント）</li>
                <li>・誤解を招く情報の共有（フェイクニュース）</li>
                <li>・身元を偽る行為（なりすまし）</li>
                <li>・著作権侵害コンテンツ（チートや海賊版）に関する発言</li>
                <li>・暴言、侮辱、威圧的態度、人格攻撃</li>
                <li>・無意味な連続投稿、過度なメンション、スパム行為</li>
                <li>・Discord利用規約に違反する全ての行為</li>
              </ul>
            </div>
            
            <div class="bg-red-50 p-6 rounded-2xl border border-red-100">
              <h4 class="font-bold mb-4 text-red-900">第三条（罰則）</h4>
              <p class="text-xs text-red-700 mb-4 font-bold">※悪質な違反は運営判断で段階を飛ばすことがあります。</p>
              <div class="space-y-4 text-sm">
                <div class="flex gap-4">
                  <span class="font-bold text-red-600">1</span>
                  <p><strong>タイムアウト：</strong> 暴言、チート発言等。一時的に発言やVCを制限します。</p>
                </div>
                <div class="flex gap-4">
                  <span class="font-bold text-red-600">2</span>
                  <p><strong>キック：</strong> スパム、意味のない長文等。強制退出（再参加は可能）。</p>
                </div>
                <div class="flex gap-4">
                  <span class="font-bold text-red-600">3</span>
                  <p><strong>BAN：</strong> Ddos攻撃、荒らしBOT等。永久追放されます。</p>
                </div>
                <div class="flex gap-4">
                  <span class="font-bold text-red-600">4</span>
                  <p><strong>即時BAN：</strong> 他鯖での問題行動が本サーバーでも見られた場合。</p>
                </div>
              </div>
              <p class="mt-6 text-xs text-slate-500">※キックを5回受けた後の違反、または累積の違反により罰則が強化されます。</p>
            </div>
          </section>

          <section class="grid md:grid-cols-2 gap-8">
            <div class="bg-slate-50 p-6 rounded-2xl">
              <h3 class="font-black mb-4 text-indigo-700">第三章（相互敬意）</h3>
              <p class="text-sm text-slate-600 leading-relaxed">ハラスメント行為、個人への脅迫行為、および本人の同意のない個人情報の共有（晒し）は厳格に禁止されています。</p>
            </div>
            <div class="bg-slate-50 p-6 rounded-2xl">
              <h3 class="font-black mb-4 text-indigo-700">第四章（その他禁止事項）</h3>
              <p class="text-sm text-slate-600 leading-relaxed">金銭トラブルについて運営は関与しません。また、外部（他鯖やSNS）のトラブルを本サーバーへ持ち込むことを禁止します。本規約はオーナーを含む全員に適用されます。</p>
            </div>
          </section>

          <section class="space-y-6">
            <h3 class="text-xl font-black border-l-4 border-indigo-600 pl-4 mb-4">第五章（役割と立場）</h3>
            <div class="space-y-4 text-sm text-slate-700 leading-loose">
              <div class="p-6 bg-slate-50 rounded-2xl">
                <h4 class="font-bold mb-2">● オーナーの権限（第十条）</h4>
                <p>規約の制定・改正・廃止を行う最高権限者です。最終決定権を持ちますが、独裁を避けサーバー全体の利益を優先する責務を負います。</p>
              </div>
              <div class="p-6 bg-slate-50 rounded-2xl">
                <h4 class="font-bold mb-2">● アドミンの役割（第十一条・第十二条）</h4>
                <p>規約に基づき日常的な管理（チャンネル・ロール・BOT・イベント等）を行います。違反行為の事後確認や処分の適用も担当します。</p>
              </div>
              <div class="p-6 bg-slate-900 text-white rounded-2xl font-medium">
                <h4 class="font-bold mb-2 text-indigo-400 underline">重要：権限の監視（第十三条〜第十六条）</h4>
                <p>各権限は相互に監視されます。アドミンの過半数が賛成すればオーナーを解任でき、常連の全員が賛成すればアドミンを解任できる仕組みを導入し、偏った運営を防止します。</p>
              </div>
            </div>
          </section>
        </div>
      </div>
    </section>

    <section id="page-staff" class="page hidden fade-in space-y-10">
      <div class="text-center">
        <h2 class="text-3xl font-black mb-4 text-slate-900">運営チーム</h2>
        <p class="text-slate-500 font-bold">サーバーの維持と管理を担当するメンバーです。</p>
      </div>

      <div class="grid md:grid-cols-2 gap-8">
        <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-200">
          <h3 class="text-lg font-black mb-6 flex items-center gap-2 text-indigo-600">
            👑 共同オーナー
          </h3>
          <div class="space-y-4">
            <div class="flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-100">
              <span class="font-bold text-slate-800">sese</span>
              <span class="text-[10px] bg-indigo-600 text-white px-2 py-1 rounded">OWNER</span>
            </div>
            <div class="flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-100">
              <span class="font-bold text-slate-800">MRF_4922</span>
              <span class="text-[10px] bg-indigo-600 text-white px-2 py-1 rounded">OWNER</span>
            </div>
          </div>
        </div>

        <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-200">
          <h3 class="text-lg font-black mb-6 flex items-center gap-2 text-slate-700">
            🛡️ アドミン（運営管理）
          </h3>
          <div class="space-y-4">
            <div class="flex justify-between p-4 bg-slate-50 rounded-xl">
              <span class="font-bold">7498</span>
              <span class="text-[10px] bg-slate-400 text-white px-2 py-1 rounded">ADMIN</span>
            </div>
            <div class="p-4 bg-slate-50 rounded-xl font-bold">sese_PAP_1122</div>
            <div class="p-4 bg-slate-50 rounded-xl font-bold">creeper_dev</div>
            <div class="p-4 bg-slate-50 rounded-xl font-bold">supernova</div>
          </div>
        </div>
      </div>
      
      <div class="bg-white p-8 rounded-3xl shadow-sm border border-slate-200 max-w-2xl mx-auto">
        <h3 class="text-lg font-black mb-6 flex items-center gap-2 text-purple-600">
          ⚖️ モデレーター（監視担当）
        </h3>
        <div class="grid grid-cols-2 gap-4 text-sm font-bold">
          <div class="p-4 bg-slate-50 rounded-xl">やも</div>
          <div class="p-4 bg-slate-50 rounded-xl">kuroneko22_22_sabu</div>
          <div class="p-4 bg-slate-50 rounded-xl">yshi</div>
        </div>
      </div>
    </section>

    <section id="page-contact" class="page hidden fade-in max-w-2xl mx-auto">
      <div class="text-center mb-8">
        <h2 class="text-3xl font-black mb-2">お問い合わせ</h2>
        <p class="text-slate-500">運営チームへメッセージを送信します。</p>
      </div>
      
      <div id="contact-area">
        <div id="contact-guest" class="bg-white p-12 rounded-3xl shadow-xl text-center border border-slate-200">
          <p class="text-slate-600 mb-8">いたずら防止のため、Googleアカウントでのログインが必要です。</p>
          <a href="/auth/google" class="inline-flex items-center gap-3 px-8 py-4 bg-slate-900 text-white rounded-xl font-bold hover:bg-slate-800 transition shadow-lg">
            Googleでログイン
          </a>
        </div>

        <div id="contact-form" class="hidden space-y-4">
          <div class="bg-indigo-50 p-4 rounded-xl flex items-center gap-4">
            <img id="u-photo" src="" class="w-12 h-12 rounded-full border-2 border-white">
            <div class="font-bold" id="u-name"></div>
          </div>
          <textarea id="c-msg" rows="5" class="w-full p-5 bg-white border border-slate-300 rounded-2xl outline-none focus:ring-2 focus:ring-indigo-500 font-medium" placeholder="内容を入力してください..."></textarea>
          <button onclick="sendContact()" id="s-btn" class="w-full py-4 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 shadow-lg transition-all">
            送信する
          </button>
        </div>
      </div>
    </section>

  </main>

  <footer class="mt-20 border-t border-slate-200 bg-white py-10 text-center">
    <div class="text-slate-400 text-xs font-bold tracking-widest uppercase">
      &copy; 2026 SESE SERVER. <br class="md:hidden"> オーナー: sese & MRF_4922
    </div>
  </footer>

  <script>
    let user = null;

    function router(p) {
      document.querySelectorAll('.page').forEach(e => e.classList.add('hidden'));
      document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('nav-active'));
      const target = document.getElementById('page-' + p);
      if(target) target.classList.remove('hidden');
      const btn = document.querySelector(`button[onclick="router('${p}')"]`);
      if(btn) btn.classList.add('nav-active');
      window.location.hash = p;
      window.scrollTo(0, 0);
    }

    async function checkLogin() {
      try {
        const r = await fetch('/api/user');
        const d = await r.json();
        const ua = document.getElementById('user-area');
        if (d.isLoggedIn) {
          user = d.user;
          ua.innerHTML = `<div class="flex items-center gap-2"><img src="${user.photo}" class="w-8 h-8 rounded-full border"><a href="/logout" class="text-[10px] text-red-500 font-bold hover:underline">ログアウト</a></div>`;
          document.getElementById('contact-guest').classList.add('hidden');
          document.getElementById('contact-form').classList.remove('hidden');
          document.getElementById('u-name').innerText = user.name;
          document.getElementById('u-photo').src = user.photo;
        } else {
          ua.innerHTML = `<a href="/auth/google" class="text-xs font-bold text-indigo-600 hover:underline">ログイン</a>`;
        }
      } catch(e) {}
    }

    async function sendContact() {
      const msg = document.getElementById('c-msg').value;
      if(!msg.trim()) return alert('内容を入力してください');
      const btn = document.getElementById('s-btn');
      btn.disabled = true;
      btn.innerText = '送信中...';
      try {
        const r = await fetch('/api/contact', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({message: msg})
        });
        const res = await r.json();
        if(res.success) {
          alert('送信が完了しました。Discordを確認してください。');
          document.getElementById('c-msg').value = '';
        }
      } catch(e) { alert('送信に失敗しました'); }
      btn.disabled = false;
      btn.innerText = '送信する';
    }

    window.onload = () => {
      checkLogin();
      const h = window.location.hash.replace('#','');
      router(h || 'home');
    };
  </script>
</body>
</html>
